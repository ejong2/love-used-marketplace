<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>커뮤니티 - 사랑스러운 중고거래 웹사이트</title>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="header">
    <div class="logo">사랑스러운 중고</div>
    <nav class="menu">
      <a href="00_home.html">홈</a>
      <a href="01_popular_items.html">인기 아이템</a>
      <a href="02_recently_viewed.html">최근 본 상품</a>
      <a href="03_community.html" class="active">커뮤니티</a>
      <a href="04_mypages.html">마이페이지</a>
    </nav>
    <div class="search-container">
      <input type="search" class="search" placeholder="찾고 싶은 상품을 검색하세요">
      <button class="search-btn"><i class="fas fa-search"></i></button>
    </div>
  </div>

  <div class="main-title">
    <h1>커뮤니티</h1>
  </div>

  <section class="community-content">
    <div class="community-posts">
      <div class="post">
        <h2>싱어 뮤지컬 '레미제라블'을 감상한 후기</h2>
        <p>싱어 뮤지컬 '레미제라블'을 감상한 후기입니다. 이번 공연에서는 배우들의 열연과 음악의 아름다움에 감동받았습니다. 특히, 주인공의 연기는 정말 인상적이었습니다.</p>
        <div class="post-meta">
          <span class="author">작성자: 뮤지컬매니아</span>
          <span class="date">작성일: 2024년 3월 20일</span>
        </div>
      </div>
      <div class="post">
        <h2>연극 '해리 포터와 저주받은 아이' 공연 후기</h2>
        <p>연극 '해리 포터와 저주받은 아이'를 관람한 후기입니다. 이번 공연은 마법 세계를 재현한 뛰어난 무대 설정과 배우들의 연기력으로 흥미진진하게 즐길 수 있었습니다.</p>
        <div class="post-meta">
          <span class="author">작성자: 판타지연극광</span>
          <span class="date">작성일: 2024년 3월 19일</span>
        </div>
      </div>
      <div class="post">
        <h2>뮤지컬 '위키드'를 감상한 감흥이 가득한 리뷰</h2>
        <p>뮤지컬 '위키드'를 관람한 후 매료되어 쓴 리뷰입니다. 멋진 음악과 화려한 무대 세트, 그리고 역동적인 배우들의 연기는 정말 잊지 못할 경험이었습니다.</p>
        <div class="post-meta">
          <span class="author">작성자: 음악극팬</span>
          <span class="date">작성일: 2024년 3월 18일</span>
        </div>
      </div>
      <div class="post">
        <h2>무대음향 기기 파벨 PA-100의 실제 사용 후기</h2>
        <p>무대음향 기기 파벨 PA-100을 사용한 후 남긴 리뷰입니다. 이 기기는 음질이 탁월하고 사용이 간편하여 공연장에서 무대 음향을 조절하는 데 큰 도움이 되었습니다.</p>
        <div class="post-meta">
          <span class="author">작성자: 사운드 엔지니어</span>
          <span class="date">작성일: 2024년 3월 17일</span>
        </div>
      </div>
      <div class="post">
        <h2>무대음향 기기 파벨 PA-100의 실제 사용 후기</h2>
        <p>무대음향 기기 파벨 PA-100을 사용한 후 남긴 리뷰입니다. 이 기기는 음질이 탁월하고 사용이 간편하여 공연장에서 무대 음향을 조절하는 데 큰 도움이 되었습니다.</p>
        <div class="post-meta">
          <span class="author">작성자: 사운드 엔지니어</span>
          <span class="date">작성일: 2024년 3월 17일</span>
        </div>
      </div>
    </div>

    <div class="sidebars-container">
      <div class="sidebar" id="popular-posts-sidebar">
        <div class="popular-filter">
          <h2>인기 글</h2>
          <div class="filters">
            <button class="filter-btn active">하루</button>
            <button class="filter-btn">일주일</button>
            <button class="filter-btn">한달</button>
          </div>
        </div>
        <ul class="popular-posts">
          <li><span class="rank">1</span><a href="#">싱어 뮤지컬 '레미제라블'을 감상한 후기입니다.</a></li>
          <li><span class="rank">2</span><a href="#">연극 '해리 포터와 저주받은 아이' 공연 후기를 공유합니다.</a></li>
          <li><span class="rank">3</span><a href="#">뮤지컬 '위키드'를 감상한 감흥이 가득한 리뷰입니다.</a></li>
          <li><span class="rank">4</span><a href="#">무대음향 기기 파벨 PA-100의 실제 사용 후기입니다.</a></li>
          <li><span class="rank">5</span><a href="#">오페라 '라 트라비아타'를 즐긴 후기를 공유합니다.</a></li>
          <li><span class="rank">6</span><a href="#">연극 '킹리어'의 라이브 CD를 듣고 느낀 점을 소개합니다.</a></li>
          <li><span class="rank">7</span><a href="#">뮤지컬 '팬텀 오브 더 오페라'를 감상한 후기를 공유합니다.</a></li>
          <li><span class="rank">8</span><a href="#">연극 '로미오와 줄리엣'을 관람한 소감을 공유합니다.</a></li>
          <li><span class="rank">9</span><a href="#">뮤지컬 '레미제라블'의 감동을 되새기는 후기를 공유합니다.</a></li>
          <li><span class="rank">10</span><a href="#">연극 '하데스타운'의 다양한 요소에 대한 소감을 공유합니다.</a></li>
        </ul>
      </div>

      <div class="sidebar" id="weekly-events-sidebar">
        <div class="weekly-events-calendar">
          <h3>월간 공연 일정</h3>
          <div class="month-indicator">4월</div>
          <div class="calendar-grid"></div>
        </div>
      </div>
      
      <div id="events-popup-container" class="events-popup-container">
        <div class="events-popup">
          <span class="close-popup">&#10006;</span>
          <div class="events-list"></div> <!-- 여러 이벤트를 위한 새로운 컨테이너 -->
        </div>
      </div>
      
    </div>

  </section>

  <section class="community-poll">
    <h2>이번 주 설문조사</h2>
    <p>당신이 가장 기대하는 공연은 무엇인가요?</p>
    <form id="pollForm">
      <label><input type="radio" name="show" value="wicked" required> 뮤지컬 '위키드'</label>
      <label><input type="radio" name="show" value="phantom" required> 뮤지컬 '팬텀'</label>
      <label><input type="radio" name="show" value="swan-lake" required> 발레 '백조의 호수'</label>
      <label><input type="radio" name="show" value="carmen" required> 오페라 '카르멘'</label>
      <button type="submit">투표</button>
    </form>
    <div id="pollResults" style="display:none;">
      <h3>결과 보기</h3>
      <div id="results"></div>
    </div>
  </section>

  <footer>
    <div class="footer-content">
      <p>&copy; 2024 사랑스러운 중고. 모든 권리 보유.</p>
    </div>
  </footer>

</body>

</html>

<script>
  document.getElementById('pollForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const selectedShow = formData.get('show');
    const resultsData = {
      '위키드': 40,
      '팬텀': 30,
      '스완레이크': 20,
      '카르멘': 10
    };
    displayResults(resultsData, selectedShow);
  });
  
  function displayResults(data, selected) {
    const resultsElement = document.getElementById('results');
    resultsElement.innerHTML = ''; // 결과 컨테이너 초기화
    const resultList = document.createElement('ul'); // 결과를 담을 리스트 생성
    resultList.classList.add('result-list'); // 리스트에 클래스 추가
    Object.keys(data).forEach(key => {
      const percentage = data[key];
      const resultItem = document.createElement('li'); // 결과 항목을 담을 li 요소 생성
      resultItem.classList.add('result-item'); // li 요소에 클래스 추가
      resultItem.textContent = key === selected ? `★ ${key} - ${percentage}%` : `${key} - ${percentage}%`; // 선택된 항목 강조
      resultList.appendChild(resultItem); // 리스트에 결과 항목 추가
    });
    resultsElement.appendChild(resultList); // 결과 컨테이너에 리스트 추가
    document.getElementById('pollResults').style.display = 'block'; // 결과 섹션 표시
  }
  
  document.querySelector('.community-poll h2').addEventListener('click', function() {
    const form = document.getElementById('pollForm');
    const results = document.getElementById('pollResults');
    this.classList.toggle('collapsed');
    if (this.classList.contains('collapsed')) {
      form.style.display = 'none';
      results.style.display = 'none';
    } else {
      form.style.display = 'flex';
      results.style.display = 'block';
    }
  });
  
</script>

<script>
  // 이벤트 데이터를 배열 형태로 업데이트
  const eventsData = {
    "2": [{
      title: "뮤지컬 '위키드'",
      image: "https://www.seoulfn.com/news/photo/202103/415408_190048_241.gif",
      description: "This is a description for 뮤지컬 '위키드'.",
      link: "https://example.com/wicked"
    },
    {
      title: "오페라 '카르멘'",
      image: "https://www.seongdongnews.com/news/photo/202210/27819_21233_5850.jpg",
      description: "This is a description for 오페라 '카르멘'.",
      link: "https://example.com/carmen"
    },
    ],
    "4": [{
      title: "오페라 '카르멘'",
      image: "https://www.seongdongnews.com/news/photo/202210/27819_21233_5850.jpg",
      description: "This is a description for 오페라 '카르멘'.",
      link: "https://example.com/carmen"
    }],
    // ...다른 이벤트
  };

  document.addEventListener('DOMContentLoaded', () => {
    // 달력 그리드 생성 로직 유지
    const calendarGrid = document.querySelector('.calendar-grid');
    for (let day = 1; day <= 30; day++) {
      const dayDiv = document.createElement('div');
      dayDiv.className = 'day';
      if (eventsData[day]) dayDiv.classList.add('has-events');
      dayDiv.setAttribute('data-day', day);
      dayDiv.textContent = day;
      calendarGrid.appendChild(dayDiv);
    }

    document.querySelectorAll('.day.has-events').forEach(day => {
      day.addEventListener('click', function () {
        showEventsForDay(this.getAttribute('data-day'));
      });
    });

    document.querySelector('.close-popup').addEventListener('click', () => {
      document.getElementById('events-popup-container').style.display = 'none';
    });
  });

  // 이벤트 팝업 표시 로직 수정
  function showEventsForDay(day) {
    const eventsForDay = eventsData[day];
    const popupContainer = document.getElementById('events-popup-container');
    const eventsList = popupContainer.querySelector('.events-list');
    eventsList.innerHTML = ''; // 이전 이벤트 내용 초기화

    if (eventsForDay && eventsForDay.length > 0) {
      eventsForDay.forEach(event => {
        const eventItem = document.createElement('div');
        eventItem.className = 'event-item';
        eventItem.innerHTML = `
          <img src="${event.image}" alt="${event.title}" class="event-image">
          <h2 class="event-title">${event.title}</h2>
          <div class="event-date">${day}일의 이벤트</div>
          <div class="event-description">${event.description}</div>
          <a href="${event.link}" class="event-link">More Info</a>
        `;
        eventsList.appendChild(eventItem);
      });
    } else {
      eventsList.innerHTML = `<div class="event-date">${day}일은 이벤트가 없습니다.</div>`;
    }

    popupContainer.style.display = 'flex';
  }
</script>
